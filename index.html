<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <title>2026학년도 문막초등학교 행정업무 안내 웹페이지</title>

  <link rel="icon" href="/static/favicon.ico" />
  <link rel="stylesheet" href="/static/style.css" />

  <style>
    .kicker { text-align:center; margin: 10px 0 0; color:#666; font-size:0.95rem; }
    .notice-bar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .pill { display:inline-block; padding:6px 10px; border:1px solid #e5e5e5; border-radius:999px; background:#fafafa; font-size:0.9rem; color:#444; }
    .search-row { display:flex; gap:10px; flex-wrap:wrap; }
    .search-row input { flex: 1 1 260px; }
    .tool-list li { display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .tool-list a { text-decoration: underline; text-underline-offset: 2px; }
    .mini { font-size:0.9rem; color:#666; }
    .right { display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .tag { font-size:0.85rem; border:1px solid #ddd; border-radius:999px; padding:4px 8px; background:#fff; color:#444; white-space:nowrap; }
    .hidden { display:none !important; }
    .toast {
      position: fixed; left: 50%; bottom: 18px; transform: translateX(-50%);
      padding: 10px 12px; border: 1px solid #e5e5e5; border-radius: 12px;
      background: rgba(255,255,255,0.95); box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      font-size: 0.95rem; color:#111; z-index: 9999;
      display:none;
    }
    .ref-list { margin: 8px 0 0; padding-left: 18px; }
    .ref-list li { margin: 6px 0; }
    .ref-code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 0.95rem; }
  </style>
</head>

<body>

  <main class="container">
    <h1>2026학년도 행정업무 안내 웹페이지</h1>
    <p class="subtitle">- 제작·운영: 행정실 고주무관</p>

    <p class="kicker muted">
      · 학교 회계·행정 업무를 수행하는 과정에서 더 효율적인 처리를 목적으로 개인적으로 제작하였습니다. <br/>
      · 반복적으로 문의하시는 내용, 협조 요청 사항, 관련 규정 등에 대해서 주로 다루려고 합니다. <br/>
      ※ 문막초 또는 문막초 교육행정실 공식 사이트가 아니며, 고주무관 업무 분장 위주로 다룹니다. <br/>
    </p>

    <section class="section">
      <div class="notice-bar">
        <div>
          <h2 class="local-h2 local-tight">키워드로 검색하기</h2>
          <p class="muted local-tight">
            · 검색어를 입력하여 주십시오. <br/>
            · 관련 문서 번호 등의 근거는 상세페이지에 기재되어 있습니다. <br/>
          </p>
        </div>
      </div>

      <div class="search-row">
        <input id="q" type="text" placeholder="예시: 연차, 강사료, 위수탁, 근로계약, 협조" autocomplete="off" />
        <button class="btn" type="button" id="btnClear">검색 결과 초기화하기</button>
      </div>
    </section>

    <section class="section">
      <h2>안내 목록</h2>
      <div class="tool-grid" id="grid">

        <article class="tool-card item" data-keywords="교육공무직 공무직 복무 연차 병가 조퇴 지각 외출 근태 결재 상태 완료 교장 교감 행정실장 문서번호 편람 규정 지침">
          <div class="tool-head">
            <p class="tool-title">복무 관련 안내 (연차, 초과근무 등)</p>
            <p class="tool-sub">· 체크리스트, 반려 사유 등</p>
          </div>
          <div class="tool-body">
            <div class="row between">
              <a class="btn primary" href="/guide-work-state/index.html">상세페이지로 이동하기</a>
              <button class="btn ghost btnCopy" type="button" data-url="/guide-work-state/index.html">링크 복사하기</button>
            </div>
          </div>
        </article>

        <article class="tool-card item" data-keywords="강사료 지급 품의 서류 증빙 증빙서류 활동일지 강사활동 통장사본 신분증 원천징수 지급명세서 문서번호 지침">
          <div class="tool-head">
            <p class="tool-title">강사료 지급 관련 안내</p>
            <p class="tool-sub">· 체크리스트, 반려 사유 등</p>
          </div>
          <div class="tool-body">
            <div class="row between">
              <!-- href/copy 경로 불일치 수정: 둘 다 /guide-instructor-fee/index.html로 통일 -->
              <a class="btn primary" href="/guide-instructor-fee/index.html">상세페이지로 이동하기</a>
              <button class="btn ghost btnCopy" type="button" data-url="/guide-instructor-fee/index.html">링크 복사하기</button>
            </div>
          </div>
        </article>

        <article class="tool-card item" data-keywords="늘봄학교 늘봄 강사 외부강사 방과후강사 방과후 맞춤형 선택형 위수탁 위수탁계약 계약 절차 채용 서류 범죄경력조회 범죄경력 아동학대 성범죄 문서번호 지침">
          <div class="tool-head">
            <p class="tool-title">계약 업무 관련 안내</p>
            <p class="tool-sub">· 유형 구분 → 타임라인 → 지급</p>
          </div>
          <div class="tool-body">
            <div class="row between">
              <a class="btn primary" href="/guide-contract/index.html">상세페이지로 이동하기</a>
              <button class="btn ghost btnCopy" type="button" data-url="/guide-contract/index.html">링크 복사하기</button>
            </div>
          </div>
        </article>

        <article class="tool-card item" data-keywords="서식 양식 파일 활동일지 정산서 산출내역 엑셀 제출 협조 행정실협조 행정실 교무실 업무범위 업무분장 책임 요청 금지 제출기한">
          <div class="tool-head">
            <p class="tool-title">각종 업무 관련 파일 서식</p>
            <p class="tool-sub">· 활동일지 등</p>
          </div>
          <div class="tool-body">
            <!-- 여기서 ul이 열리고 닫히지 않던 구조 깨짐 수정(ul 제거) -->
            <div class="row between">
              <a class="btn primary" href="/giving-files/index.html">상세페이지로 이동하기</a>
              <button class="btn ghost btnCopy" type="button" data-url="/giving-files/index.html">링크 복사하기</button>
            </div>
          </div>
        </article>

      </div>
    </section>

    <section class="section dl-section">
      <h2>업무 관련 근거 규정</h2>
      <div class="card">
        <p class="muted" style="margin-top:0;">· 상세페이지에도 기재되어 있습니다.</p>

        <!-- JSON에서 자동 주입되도록 data-doc-id 사용 -->
        <ul class="ref-list" id="refList">
          <li data-doc-id="leave">
            <span class="ref-code">[복무 지침]</span>
            문서번호: <span class="ref-code" data-doc-field="number">[로딩중]</span>
            / 제목: <span class="ref-code" data-doc-field="title">[로딩중]</span>
          </li>
          <li data-doc-id="instructor_fee">
            <span class="ref-code">[강사료]</span>
            문서번호: <span class="ref-code" data-doc-field="number">[로딩중]</span>
            / 제목: <span class="ref-code" data-doc-field="title">[로딩중]</span>
          </li>
          <li data-doc-id="contract">
            <span class="ref-code">[방과후 계약]</span>
            문서번호: <span class="ref-code" data-doc-field="number">[로딩중]</span>
            / 제목: <span class="ref-code" data-doc-field="title">[로딩중]</span>
          </li>
          <li data-doc-id="closing">
            <span class="ref-code">[회계 마감]</span>
            문서번호: <span class="ref-code" data-doc-field="number">[로딩중]</span>
            / 제목: <span class="ref-code" data-doc-field="title">[로딩중]</span>
          </li>
        </ul>

        <p class="muted">※ 문서번호는 <span class="ref-code">/static/document-number.json</span>에서 관리합니다.</p>
      </div>
    </section>

    <section class="section">
      <h2>운영 원칙</h2>
      <div class="card">
        <ul>
          <li>요청은 <b>체크리스트 작성 후</b> 제출 바랍니다.</li>
          <li><b>서류/증빙 누락</b> 시 반려합니다.</li>
          <li><b>기한 경과</b> 건은 다음 회차 처리될 수 있습니다.</li>
          <li><b>구두 요청</b>은 링크 안내로 대체합니다.</li>
          <li><b>예외 처리</b>는 지침/공문/결재 근거 첨부 시만 검토합니다.</li>
        </ul>
      </div>
    </section>

  </main>

  <div class="toast" id="toast"></div>

  <script>
    (function () {
      const $ = (sel, el=document) => el.querySelector(sel);
      const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

      function toast(msg) {
        const t = $("#toast");
        if (!t) return;
        t.textContent = msg;
        t.style.display = "block";
        clearTimeout(toast._timer);
        toast._timer = setTimeout(() => (t.style.display = "none"), 1400);
      }

      function absUrl(path) {
        try { return new URL(path, location.origin).toString(); }
        catch { return path; }
      }

      async function copyText(text) {
        try {
          await navigator.clipboard.writeText(text);
          return true;
        } catch (e) {
          const ta = document.createElement("textarea");
          ta.value = text;
          ta.style.position = "fixed";
          ta.style.left = "-9999px";
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          let ok = false;
          try { ok = document.execCommand("copy"); } catch {}
          ta.remove();
          return ok;
        }
      }

      // 링크 복사 버튼 (.btnCopy)만 대상으로
      $$(".btnCopy").forEach(btn => {
        btn.addEventListener("click", async () => {
          const url = btn.dataset.url ? absUrl(btn.dataset.url) : location.href;
          const ok = await copyText(url);
          toast(ok ? "링크 복사 완료" : "복사 실패(브라우저 권한 확인)");
        });
      });

      // 검색 필터
      const q = $("#q");
      const btnClear = $("#btnClear");
      const items = $$(".item");

      function norm(s) {
        return (s || "").toLowerCase().replace(/\s+/g, " ").trim();
      }

      function applyFilter() {
        const needle = norm(q?.value);
        if (!needle) {
          items.forEach(it => it.classList.remove("hidden"));
          return;
        }
        items.forEach(it => {
          const hay = norm(it.textContent + " " + (it.dataset.keywords || ""));
          it.classList.toggle("hidden", !hay.includes(needle));
        });
      }

      if (q) q.addEventListener("input", applyFilter);
      if (btnClear) btnClear.addEventListener("click", () => { if (q) q.value = ""; applyFilter(); q?.focus(); });
      applyFilter();

      // 문서번호 JSON 로딩 → 근거 규정 섹션 자동 채우기
      async function loadDocumentNumbers() {
        const list = $("#refList");
        if (!list) return;

        try {
          const res = await fetch("/static/document-number.json", { cache: "no-store" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          const data = await res.json();
          const docs = (data && data.docs) ? data.docs : {};

          $$("#refList [data-doc-id]").forEach(li => {
            const id = li.getAttribute("data-doc-id");
            const doc = docs[id];
            if (!doc) return;

            const numEl = li.querySelector('[data-doc-field="number"]');
            const titleEl = li.querySelector('[data-doc-field="title"]');

            if (numEl) numEl.textContent = doc.number || "-";
            if (titleEl) titleEl.textContent = doc.title || "-";
          });
        } catch (err) {
          // JSON을 못 불러오면 기존 placeholder 유지 + 짧은 표시만
          toast("문서번호 로딩 실패(파일 경로/권한 확인)");
          console.warn(err);
        }
      }

      loadDocumentNumbers();
    })();
  </script>

  
  <script src="/static/disable-copy.js"></script>
  <script src="/static/footer.js"></script>
  <script src="/static/global-loader.js?v=1"></script>

</body>
</html>
